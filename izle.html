<nav style="background: #000; padding: 15px; display: flex; gap: 20px; border-bottom: 2px solid #e50914;">
    <a href="anasayfa.html" style="color: white; text-decoration: none; font-weight: bold;">ğŸ“º Ana Sayfa</a>
    <a href="yazar.html" style="color: white; text-decoration: none; font-weight: bold;">âœï¸ Yazar Paneli</a>
    <a href="admin.html" style="color: white; text-decoration: none; font-weight: bold;">ğŸ›¡ï¸ Admin</a>
    <a href="index.html" style="color: #e50914; text-decoration: none; margin-left: auto;">ğŸšª Ã‡Ä±kÄ±ÅŸ</a>
</nav><!DOCTYPE html>
<html lang="tr">
<head>
    <style>
        body { background: #141414; color: white; font-family: sans-serif; text-align: center; }
        .video-wrapper { position: relative; display: inline-block; width: 80%; max-width: 800px; }
        video { width: 100%; border: 3px solid #e50914; border-radius: 8px; }
        .interactive-menu {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center;
            flex-direction: column; border-radius: 8px;
        }
        .btn { padding: 15px 30px; margin: 10px; background: #e50914; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 18px; }
    </style>
</head>
<body>
    <h1>Watch Me - TanÄ±tÄ±m Ä°zle</h1>
    <div class="video-wrapper">
        <video id="myVideo" controls>
            <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
        </video><div style="margin-top: 20px; display: flex; gap: 10px;">
    <button onclick="raporla()" style="background: #e50914; color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer;">âš ï¸ Raporla</button>
    <a id="mailLinki" href="#" style="background: #007bff; color: white; text-decoration: none; padding: 10px 15px; border-radius: 4px; display: none;">ğŸ“§ Yazarla Ä°letiÅŸim</a>
</div>

<script>
    async function videoBilgileriniYukle() {
        const id = new URLSearchParams(window.location.search).get('v');
        const res = await fetch(`/video-detay?id=${id}`);
        const data = await res.json();

        // EÄŸer yazar maili varsa butonu gÃ¶ster
        if(data.email) {
            const link = document.getElementById('mailLinki');
            link.href = `mailto:${data.email}?subject=WatchMe Videosu HakkÄ±nda`;
            link.style.display = "inline-block";
        }
    }

    async function raporla() {
        const sebep = prompt("Åikayet sebebiniz nedir?");
        if(!sebep) return;
        
        const videoIsmi = new URLSearchParams(window.location.search).get('v');
        await fetch('/rapor-et', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ video: videoIsmi, sebep: sebep })
        });
        alert("Raporunuz admin paneline iletildi.");
    }

    videoBilgileriniYukle();
</script>
        
        <div id="menu" class="interactive-menu">
            <h2>Hikaye NasÄ±l Devam Etsin?</h2>
            <button class="btn" onclick="devamEt()">TanÄ±tÄ±ma Devam Et</button>
            <button class="btn" onclick="yazaraGit()">YazarÄ±n DiÄŸer KitaplarÄ±</button>
        </div>
    </div>

    <script>
        const v = document.getElementById('myVideo');
        const m = document.getElementById('menu');

        // Video 5. saniyeye gelince durur ve menÃ¼ aÃ§Ä±lÄ±r
        v.ontimeupdate = () => {
            if (Math.floor(v.currentTime) === 5) {
                v.pause();
                m.style.display = 'flex';
            }
        };

        function devamEt() { m.style.display = 'none'; v.play(); }
        function yazaraGit() { window.location.href = "/yazar-sayfasi.html"; }
    </script><div id="videoDetay">
    <button onclick="raporEt()" style="background: red; color: white; border: none; padding: 10px; cursor: pointer;">âš ï¸ Videoyu Raporla</button>
    <button onclick="iletisimeGec()" style="background: blue; color: white; border: none; padding: 10px; cursor: pointer; margin-left: 10px;">ğŸ“§ Yazara Mesaj GÃ¶nder</button>
</div>

<script>
    // Raporlama Fonksiyonu
    async function raporEt() {
        const sebep = prompt("Neden raporluyorsunuz? (Ã–rn: Uygunsuz iÃ§erik)");
        if (!sebep) return;

        const videoIsmi = new URLSearchParams(window.location.search).get('v');
        
        const response = await fetch('/rapor-et', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ video: videoIsmi, sebep: sebep })
        });

        if (response.ok) {
            alert("Raporunuz admin paneline iletildi. TeÅŸekkÃ¼rler!");
        }
    }

    // Ä°letiÅŸim Fonksiyonu
    function iletisimeGec() {
        // Bu kÄ±sÄ±m yazarÄ±n mail adresini veya iletiÅŸim formunu aÃ§abilir
        alert("YazarÄ±n iletiÅŸim adresi: yazar@watchme.com \n(Bu kÄ±smÄ± sunucudan dinamik Ã§ekebiliriz!)");
    }
</script>
</body>

</html>
<div style="margin-top: 20px; display: flex; gap: 15px;">
    <button onclick="raporEt()" 
            style="background: #e50914; color: white; border: none; padding: 12px 20px; border-radius: 4px; cursor: pointer; font-weight: bold;">
        âš ï¸ Videoyu Raporla
    </button>
    
    <a id="iletisimButonu" href="#" 
       style="background: #007bff; color: white; text-decoration: none; padding: 12px 20px; border-radius: 4px; font-weight: bold; display: none;">
        ğŸ“§ Yazara Mesaj GÃ¶nder
    </a>
</div>

<script>
    // Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda video verilerini ve yazarÄ±n emailini Ã§ek
    async function videoBilgisiGetir() {
        const urlParams = new URLSearchParams(window.location.search);
        const videoId = urlParams.get('v');
        
        // Sunucudan bu videonun detaylarÄ±nÄ± (ve yazar emailini) istiyoruz
        const res = await fetch(`/video-detay?id=${videoId}`);
        const data = await res.json();
        
        if(data.email) {
            const btn = document.getElementById('iletisimButonu');
            btn.href = `mailto:${data.email}?subject=WatchMe Videosu HakkÄ±nda`;
            btn.style.display = "block";
        }
    }

    async function raporEt() {
        const sebep = prompt("Bu videoyu neden raporluyorsunuz?");
        if (!sebep) return;

        const videoId = new URLSearchParams(window.location.search).get('v');
        await fetch('/rapor-et', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ videoId: videoId, sebep: sebep })
        });
        alert("Åikayetiniz alÄ±ndÄ±, admin ekibi inceleyecektir.");
    }

    videoBilgisiGetir();
</script>

